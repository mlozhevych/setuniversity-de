# AdTech ETL Pipeline

## –ü—Ä–æ –ø—Ä–æ—î–∫—Ç
–¶–µ–π –ø—Ä–æ—î–∫—Ç —î –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–º ETL (Extract, Transform, Load) –ø—Ä–æ—Ü–µ—Å–æ–º, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–º –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –¥–∞–Ω–∏—Ö (AdTech). –í—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –Ω–∞–±–æ—Ä–∏ –¥–∞–Ω–∏—Ö –∑ Google Drive, —Ä–æ–∑–≥–æ—Ä—Ç–∞—î —ñ–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö MySQL –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ü—ñ –¥–∞–Ω—ñ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ "—Å–∏—Ä—ñ" (raw) —Ç–∞–±–ª–∏—Ü—ñ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö: –°–∫—Ä–∏–ø—Ç —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î CSV-—Ñ–∞–π–ª–∏ –∑ –Ω–∞–¥–∞–Ω–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å Google Drive.
2. –Ü–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ: Docker —Ç–∞ Docker Compose —Å—Ç–≤–æ—Ä—é—é—Ç—å –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω–µ —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ, —â–æ —É—Å—É–≤–∞—î –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ª–æ–∫–∞–ª—å–Ω–∏–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏.
2. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤: docker-compose –∫–µ—Ä—É—î –∑–∞–ø—É—Å–∫–æ–º, –∑—É–ø–∏–Ω–∫–æ—é —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—î—é –º—ñ–∂ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —Ç–∞ ETL-—Å–∫—Ä–∏–ø—Ç–æ–º.
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–î: –°–∫—Ä–∏–ø—Ç –æ—á—ñ–∫—É—î –ø–æ–≤–Ω–æ—ó –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –ø—ñ—Å–ª—è —á–æ–≥–æ —Å—Ç–≤–æ—Ä—é—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤ –Ω–∏—Ö –¥–∞–Ω—ñ.
4. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö: –î–∞–Ω—ñ –±–∞–∑–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É Docker-—Ç–æ–º—ñ (volume), —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î —ó—Ö –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –º—ñ–∂ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

> –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏, CI‚Äëpipeline –∞–±–æ —à–≤–∏–¥–∫–∏—Ö PoC‚Äë–¥–µ–º–æ –≤ –∞–¥—Ç–µ—Ö‚Äë–¥–æ–º–µ–Ω—ñ.

---

## üõ†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

| –®–∞—Ä        | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó                                                                                                                |
|------------|---------------------------------------------------------------------------------------------------------------------------|
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ | **Docker 24+**, **Docker Compose v2**                                                                                     |
| –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö | **MySQL 8.4 (oraclelinux9, local\_infile = 1)**                                                                           |
| –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è | Bash 5, **gdown 5** (Python 3.11), curl 8                                                                                 |
| ETL –ª–æ–≥—ñ–∫–∞ | SQL‚Äë—Å–∫—Ä–∏–ø—Ç–∏ `load_raw_data.sql`, `create_table.sql`, `load_clean_data.sql`                                                |
| –¢—é–Ω—ñ–Ω–≥     | `bulk_load.cnf` —ñ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `innodb_buffer_pool_size`, `bulk_insert_buffer_size`, `innodb_flush_log_at_trx_commit = 2` |

---

## ‚öôÔ∏è –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

1. **–í–∏–º–æ–≥–∏**: Docker ‚â• 24, docker‚Äëcompose v2, 4GB RAM, —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç.
2. **–ö–ª–æ–Ω**:
   ```bash
   git clone https://github.com/mlozhevych/setuniversity-de.git
   cd HW-1
   ```
3. **–ë—ñ–ª–¥ + –∑–∞–ø—É—Å–∫**:
   ```bash
   docker compose build   # ~3—Ö–≤, —Ç—è–≥–Ω–µ MySQL8.4 —Ç–∞ gdown
   docker compose up -d   # –ø—ñ–¥–Ω—ñ–º–∞—î –π –∑–∞–ø—É—Å–∫–∞—î —ñ–Ω—ñ—Ç‚Äë—Å–∫—Ä–∏–ø—Ç–∏
   docker compose logs -f db  # —Å–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å‚Äë–±–∞—Ä–∞–º–∏ gdown
   ```
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞**:
   ```bash
   docker exec -it adtech-mysql mysql -u root -prootpass -e "SELECT COUNT(*) FROM AdTech.RawEvents;"
   ```
5. **–î–æ—Å—Ç—É–ø –¥–æ –ë–î**: `localhost:3306`/ **adtech / adtechpass**.

### –°–∫–∏–¥–∞–Ω–Ω—è –π –ø–æ–≤—Ç–æ—Ä–Ω–∏–π —ñ–º–ø–æ—Ä—Ç

```bash
docker compose down -v   # –≤–∏–¥–∞–ª—è—î —Ç–æ–º–∏ –π —Å—Ö–µ–º—É
docker compose up -d     # —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–æ—á–∞—Ç–∫—É
```

---

## üóÇÔ∏è –û–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å

| –¢–∞–±–ª–∏—Ü—è           | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                                                                                                                             | –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–ª–æ–Ω–∫–∏                                                                                                                                                      |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **RawEvents**     | –ù–∞–π–±—ñ–ª—å—à–∞ —Ç–∞–±–ª–∏—Ü—è, —â–æ –º—ñ—Å—Ç–∏—Ç—å –ª–æ–≥ —É—Å—ñ—Ö —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –ø–æ–¥—ñ–π: –ø–æ–∫–∞–∑–∏, –∫–ª—ñ–∫–∏, –≤–∞—Ä—Ç—ñ—Å—Ç—å —Ä–µ–∫–ª–∞–º–∏, —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π —Ç–∞ –ª–æ–∫–∞—Ü—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—ñ–¥ —á–∞—Å –ø–æ–∫–∞–∑—É. | `EventID` (PK), `CampaignName`, `UserID`, `Device`, `Location`, `Timestamp`, `WasClicked`, `ClickTimestamp`, `BidAmount`, `AdCost`, `DeviceTypeID`\*, `LocationID`\* |
| **RawUsers**      | –ó–±–µ—Ä—ñ–≥–∞—î –≤–∏—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: –¥–µ–º–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ –¥–∞–Ω—ñ (–≤—ñ–∫, —Å—Ç–∞—Ç—å), –ª–æ–∫–∞—Ü—ñ—é, —ñ–Ω—Ç–µ—Ä–µ—Å–∏ —Ç–∞ –¥–∞—Ç—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó.                                     | `UserID` (PK), `Age`, `Gender`, *‚Ä¶*                                                                                                                                  |
| **RawCampaigns**  | –ú—ñ—Å—Ç–∏—Ç—å –≤–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ —Ä–µ–∫–ª–∞–º–Ω—ñ –∫–∞–º–ø–∞–Ω—ñ—ó: —ó—Ö –º–µ—Ç–∞–¥–∞–Ω—ñ, –±—é–¥–∂–µ—Ç, –¥–∞—Ç–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è —Ç–∞ –Ω–∞–∑–≤–∏.                                                              | `CampaignID`, `AdvertiserName`, `CampaignName`, *‚Ä¶*                                                                                                                  |
| **Campaigns**     | –†–µ–∫–ª–∞–º–Ω—ñ –∫–∞–º–ø–∞–Ω—ñ—ó.                                                                                                                                      | `CampaignID` (PK), `CampaignName`, `StartDate`, `EndDate`, `Budget`                                                                                                  |
| **DeviceTypes**   | –î–æ–≤—ñ–¥–Ω–∏–∫ —Ç–∏–ø—ñ–≤ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤.                                                                                                                               | `DeviceTypeID` (PK), `DeviceName`                                                                                                                                    |
| **Locations**     | –î–æ–≤—ñ–¥–Ω–∏–∫ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ–π.                                                                                                                                    | `LocationID` (PK), `CountryName`, `Region`, `City`                                                                                                                   |
| **Events**        | –ù–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –ø–æ–∫–∞–∑—ñ–≤.                                                                                                                          | `EventID` (PK), `CampaignID` (FK), `UserID`, `DeviceTypeID`, `LocationID`, `Timestamp`, `BidAmount`, `AdCost`                                                        |
| **Clicks**        | –ù–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –∫–ª—ñ–∫—ñ–≤.                                                                                                                           | `EventID` (PK, FK ‚Üí Events), `ClickTimestamp`, `AdRevenue`                                                                                                           |
| **UserInterests** | –ù–¶–µ —Å–ø–æ–ª—É—á–Ω–∞ —Ç–∞–±–ª–∏—Ü—è (junction/linking table), —è–∫–∞ —Ä–µ–∞–ª—ñ–∑—É—î –∑–≤'—è–∑–æ–∫ "–±–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö" –º—ñ–∂ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ (Users) —Ç–∞ —ó—Ö–Ω—ñ–º–∏ —ñ–Ω—Ç–µ—Ä–µ—Å–∞–º–∏ (Interests).    | `UserID` (PK, FK ‚Üí Users), `InterestID` (PK, FK ‚Üí Interests)                                                                                                         |
| **Advertisers**   | –î–æ–≤—ñ–¥–∫–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è (lookup table), —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö —Ä–µ–∫–ª–∞–º–æ–¥–∞–≤—Ü—ñ–≤.                                                                     | `AdvertiserID` (PK), `AdvertiserName`                                                                                                                                |
| **AdSlotSizes**   | –î–æ–≤—ñ–¥–∫–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ —Ä–µ–∫–ª–∞–º–Ω–∏—Ö —Å–ª–æ—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 300x250, 728x90).                                                         | `AdSlotSizeID` (PK), `Width`, `Height`                                                                                                                               |
| **Users**         | –¶–µ –æ—Å–Ω–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü—è-–≤–∏–º—ñ—Ä (dimension table), —â–æ –∑–±–µ—Ä—ñ–≥–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–∂–Ω–æ–≥–æ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.                                   | `UserID` (PK), `Age`, `Gender`, `LocationID` (FK ‚Üí Locations), `SignupDate`                                                                                                      |

![diagram.png](docs/diagram.png)
![example.png](docs/example.png)

## üìà –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

- `LOAD DATA INFILE` –ø—Ä–∞—Ü—é—î –≤ `/var/lib/mysql-files` (–∑–Ω–∞—á–µ–Ω–Ω—è `secure_file_priv`).
- `ALTER TABLE ‚Ä¶ DISABLE KEYS` ‚Äî –æ–¥–∏–Ω rebuild –∑–∞–º—ñ—Å—Ç—å –º—ñ–ª—å–π–æ–Ω—ñ–≤ –≤—Å—Ç–∞–≤–æ–∫ —É PK.
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ `bulk_load.cnf` —É–≤—ñ–º–∫–Ω–µ–Ω—ñ –≤–µ—Å—å —á–∞—Å; —è–∫—â–æ —Ü–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω ‚Äî –≤–∏–¥–∞–ª—ñ—Ç—å —Ñ–∞–π–ª –ø—ñ—Å–ª—è –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É –π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

---

## üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–æ –ø—ñ–¥ MIT License. –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –¥–∏–≤–∏—Å—å —É —Ñ–∞–π–ª—ñ `LICENSE`.